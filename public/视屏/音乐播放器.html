<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Èü≥‰πêÊí≠ÊîæÂô®</title>

    <style>

        html,body,div,p,img,span,ul,li,input{
            margin: 0;
            padding: 0;
        }

        input{
            outline: none;
        }

        #box{

            width: 500px;
            height: 700px;
            margin: 50px auto;
            border: 1px solid pink;

        }

        header{

            height: 100px;
            background-color: cornflowerblue;
        }

        .view{

            height: 400px;
            text-align: center;
            line-height: 400px;
            background-color: pink;

        }

        .controller{
            height: 200px;
            background-color: antiquewhite;
            position: relative;
        }

        header p{

            text-align: center;
            line-height: 100px;
            font-size: 30px;
        }

        .view span{

            display: inline-block;
            height: 300px;
            position: relative;
            overflow: hidden;
            vertical-align: middle;
            border-radius: 50%;

            -webkit-animation: ro 3s linear infinite;
            -o-animation: ro 3s linear infinite;
            animation: ro 3s linear infinite;
        }

        .view span:before{
            content: "";
            display: block;
            position: absolute;
            width: 80px;
            height: 80px;
            border-radius: 50%;
            left: 50%;
            top: 50%;
            margin-left: -40px;
            margin-top: -40px;
            background-color: white;
        }

        @keyframes ro {

            0%{
                -webkit-transform: rotate(0deg);
                -moz-transform: rotate(0deg);
                -ms-transform: rotate(0deg);
                -o-transform: rotate(0deg);
                transform: rotate(0deg);
            }

            100%{

                -webkit-transform: rotate(360deg);
                -moz-transform: rotate(360deg);
                -ms-transform: rotate(360deg);
                -o-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        @-webkit-keyframes ro {

            0%{
                -webkit-transform: rotate(0deg);
                -moz-transform: rotate(0deg);
                -ms-transform: rotate(0deg);
                -o-transform: rotate(0deg);
                transform: rotate(0deg);
            }

            100%{

                -webkit-transform: rotate(360deg);
                -moz-transform: rotate(360deg);
                -ms-transform: rotate(360deg);
                -o-transform: rotate(360deg);
                transform: rotate(360deg);
            }
        }

        
        #playBtn{
            
            width: 70px;
            height: 70px;
            
            background-image: url("img/icon.jpg");
            background-position: -219px -35px;
            background-color: transparent;
            background-size: 300px 225px;
            background-repeat: no-repeat;
            border: none;
            border-radius: 50%;
            position: absolute;
            left: 50%;
            margin-left: -35px;
            
        }

        .playBtnSelected{

            background-position: -150px -35px!important;
        }

        #volume{

            position: absolute;

            right: 30px;

            top: 20px;

        }

        #volume input{
            margin-left: 10px;
            margin-right: 10px;
            width: 100px;
        }

        #volume span{

            display: inline-block;
            width: 20px;
            text-align: center;
        }

        #pross{
            height: 5px;
            background-color: orange;
            width: 400px;
            margin: 0 auto;
            border-radius: 5px;
        }

        #pross div{

            width: 0px;
            height: 100%;
            border-radius: 5px;
            background-color: green;

        }
    </style>


</head>
<body>

    <audio>
        <source src="video/ËÆ∏Âµ©%20-%20Ê±üÊπñ%20%5Bmqms2%5D.mp3">
    </audio>

    <div id="box">

        <header>
            <p>
                Êºî Âëò
            </p>
        </header>

        <div class="view">
            <span>
                <img src="img/1.jpg" alt="">
            </span>
        </div>

        <div class="controller">
            <div id="pross">
                <div></div>
            </div>
            <input  id = "playBtn" type="button" onclick=play(this)>
            <lable id = "volume">üîä
                <input type="range" max="100" value="50" oninput= changeVolume(this)>
                <span>99</span>
            </lable>
        </div>
    </div>

    <ul></ul>

    <script>


        //ÂàõÂª∫‰∏Ä‰∏™ÊûÑÈÄ†ÂáΩÊï∞ ‰º†‰∫∫‰∏Ä‰∏™audioÂÖÉÁ¥†

//        function Player(audioEle,playBtn,pauseBtn) {
//
//            //Êääaudio ÂÖÉÁ¥†ËÆæÁΩÆÊàêÊàë‰ª¨playerÁöÑ‰∏Ä‰∏™Â±ûÊÄß
//            this.audioEle = audioEle;
//
//            this.play = function () {
//
//                this.audioEle.play();
//            }
//
//            this.pause = function () {
//
//                this.audioEle.pause();
//            }
//
//
//        }

        var audio = document.querySelector("audio");

        //ËÆæÁΩÆ‰∏Ä‰∏™Ëá™ÂÆö‰πâÂ±ûÊÄßÊù•ËÆ∞ÂΩïÂΩìÂâçÁöÑÊí≠ÊîæÁä∂ÊÄÅ
        audio.isPlay = false;

        function play (btn) {

            //Âà§Êñ≠Êí≠ÊîæÁä∂ÊÄÅ Êù•ÂÜ≥ÂÆöÊòØÊí≠ÊîæÂíåÊòØËØ•ÊöÇÂÅú
            if (!audio.isPlay){

                audio.play();

                //Â¶ÇÊûú‰πãÂâçÊ≤°ÊúâÊí≠Êîæ Êàë‰ª¨Â∞ÜËøõË°åÊí≠ÊîæÊìç‰Ωú Âπ∂‰∏îÊääÊí≠ÊîæÁä∂ÊÄÅËÆæÁΩÆ‰∏∫true;
                audio.isPlay = true;

                //ÂΩìÊí≠ÊîæÁöÑÊó∂ÂÄôËÆ≤Êí≠ÊîæÊåâÈíÆÁöÑclassName ËÆæÁΩÆÊàêÊåâ‰∏ãÁöÑÁ±ªÂêç Êù•Êõ¥ÊîπËÉåÊôØÂõæÁâá
                btn.className = "playBtnSelected";

                //Âú®Êí≠ÊîæÁöÑÊó∂ÂÄôË∞ÉÁî®ËøõÂ∫¶Êù°ÂáΩÊï∞ ËÆ©ËøõÂ∫¶Êù°‰∏éÊí≠ÊîæÊó∂Èó¥ÂêåÊ≠•
                press();


            }else {

                audio.pause();

                //ÊöÇÂÅú‰πãÂêéÊàë‰ª¨ÊääÊí≠ÊîæÁä∂ÊÄÅËÆæÁΩÆÊàêfalse
                audio.isPlay = false;

                //ÂΩìÊåâ‰∏ãÊöÇÂÅúÊåâÈíÆÂêéÁßªÈô§className ËÆ©ËÉåÊôØÂõæÁâáËøîÂõûÂà∞Êí≠ÊîæÁöÑÂõæÁâá
                btn.className = "";

                //ÊöÇÂÅúÊó∂ ÂÅúÊ≠¢ËøõÂ∫¶Êù°ÁöÑÂÆöÊó∂Âô® ‰∏çÂú®ËÆ©ËøõÂ∫¶Êù°ÁßªÂä®
                clearInterval(audio.timer);
                audio.timer  = null;

//                btn.value = "Êí≠Êîæ";
            }
        }


        //ÂàùÂßãÂåñÈü≥Èáè ËøêË°åchangeVolume Âπ∂‰∏î‰º†ÂÖ•range Â∞±‰ºöÊ†πÊçÆ range ËÆæÁΩÆÁöÑÂàùÂßãÂÄºÂØπÈü≥ÈáèËøõË°åËÆæÁΩÆ
        changeVolume(document.querySelector("#volume > input"));

        function changeVolume(range) {

            audio.volume = range.value / 100;

            //ËÆ©ÂêéÈù¢ÊòæÁ§∫Èü≥ÈáèÁöÑspan ‰πüË∑üÁùÄÂèòÂÄº
            range.nextElementSibling.innerHTML = range.value;

        }


        function press() {

            var per = document.querySelector("#pross");

            var perDiv = document.querySelector("#pross > div");

            audio.timer = setInterval(function () {

                //ÂΩìÂâçÊí≠ÊîæÊó∂Èó¥ Èô§ÊÄªÊó∂Èó¥ ÊòØ‰∏™ÁôæÂàÜÁôæÁöÑÂÄº
                var value = audio.currentTime / audio.duration;

                //Êí≠ÊîæÊó∂Èó¥ÁöÑÁôæÂàÜÊØî Á≠â‰∫é ËøõÂ∫¶Êù°ÁöÑÁôæÂàÜÊØî ÊâÄ‰ª• Êí≠ÊîæÁöÑÁôæÂàÜÊØî‰πò‰ª•ËøõÂ∫¶Êù°ÁöÑÊÄªÈïøÂ∫¶ Â∞±ÊòØËøõÂ∫¶ÁöÑÂ§ßÂ∞è
                perDiv.style.width = value * parseFloat(getComputedStyle(per).width) + "px";

                //audio.ended Ê†áËØÜ‰∫ÜÂΩìÂâçÊí≠ÊîæÊòØÂê¶ÂÆåÊàê
                if (audio.ended){

                    clearInterval(audio.timer);
                    audio.timer  = null;
                }


            },50);

        }

        var ul = document.querySelector("ul");

        var title = document.querySelector("header > p");

        ul.addEventListener("click",function (e) {


            if (e.target.nodeName == "LI"){

                title.innerHTML = e.target.innerHTML;

                audio.src = e.target._url;

                audio.load();

            }

        })


        var xhr = new XMLHttpRequest();

        xhr.onreadystatechange = function () {

            if (xhr.readyState == 4 && xhr.status == 200){

                //Â∞ÜÊãøÂà∞ÁöÑÊï∞ÊçÆËß£ÊûêÊàêjsÂØπË±°
                var obj = JSON.parse(xhr.responseText);

                for (var key in obj){

                    var li = document.createElement("li");

                    li.innerHTML = key;

                    li._url = obj[key];

                    ul.appendChild(li);

                }

            }
        }

        xhr.open("get","http://localhost:1314/music");

        xhr.send(null);


    </script>


</body>
</html>